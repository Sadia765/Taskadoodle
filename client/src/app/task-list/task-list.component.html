<div class="container-fluid">
    <div class="row no-gutters">
        <h1> <small class="text-muted">Tasks</small></h1>
        <div class="col form-inline" style="justify-content:flex-end">
            <label>
                <input #taskTodo class="form-control" type="text" placeholder="New Task" />
            </label>
            <button class="btn btn-secondary btn-sm" (click)="add(taskTodo.value); taskTodo.value=''">Add</button>
        </div>
    </div>
    <div class="col form-inline">

        <select class="select-option" #sort (change)="sortTasks(sort.value)">
            <option class="option" *ngFor="let sortType of sortTypes" [value]="sortType" [label]="sortType">
            </option>
        </select>

        <select class="select-option" #filter (change)="filterTasks(filter.value); filter.value='Select Filter'">
            <option class="option" *ngFor="let filter of filters" [value]="filter" [label]="filter">
            </option>
        </select>


        <button class="btn btn-secondary btn-sm" (click)="reloadPage()">Reset Filters</button>
        <small class="text-muted" *ngIf="currentFilters.length > 0">&nbsp; Current Filters:
            {{currentFilters.join(", ")}}</small>
    </div>
    <div class="row no-gutters">
        <div class="col">
            <ul class="list-group todos">
                <li *ngFor="let todo of todos" class="list-group-item list-group-item-action">
                    <label class="checkbox">
                        <input type="checkbox" class="form-check-input" [(ngModel)]="todo.completed"
                            (change)="markCompleted(todo)">
                        <button class="btn btn-priority" *ngIf="todo.priority">!</button>
                        <div *ngIf="isKanbanTask(todo);then kanbanBlock;else notKanbanBlock"></div>
                        <ng-template #kanbanBlock><a routerLink="/kanban/{{todo.id}}"><b>{{todo.title}}</b></a>
                        </ng-template>
                        <ng-template #notKanbanBlock><a routerLink="/todos/{{todo.id}}"><b>{{todo.title}}</b></a>
                        </ng-template>
                        <span *ngIf="todo.dueDate"
                            [ngStyle]="{'color': (todo.dueDate | date) >= (today | date) ? 'black' : 'red'}">
                            Due On: {{todo.dueDate | date: 'fullDate'}}</span>
                        <div *ngIf="verbose" style="color: lightgray">Additional Details (verbose={{verbose}}):
                            <span *ngIf="todo.category">
                                ID: {{todo.id}} </span>
                            <span> Created On:
                                {{todo.createdOn | date: 'full'}}</span>
                            <span *ngIf="todo.category">
                                Category: {{todo.category}} </span>
                            <span *ngIf="todo.user">
                                User: {{todo.user}} </span>
                            <span *ngIf="isKanbanTask(todo)">[Kanban]</span>
                        </div>
                        <button class="btn btn-delete" title="delete todo" (click)="delete(todo)">X</button>
                    </label>
                </li>
            </ul>
        </div>
    </div>
</div>